let getProductById=async function(id){try{let response=await fetch("http://localhost:3000/api/products/"+id);if(response.ok){let data;return await response.json()}console.log(response.status)}catch(error){console.log(error)}};class CartItem{constructor(id,quantity,color){this.id=id,this.quantity=quantity,this.color=color}}console.log("Etat du storage en arrivant sur la page",localStorage);let quantity=document.getElementById("quantity"),getItem=()=>{const itemQuantity=parseInt(quantity.value);let itemToGet=new CartItem(productId,itemQuantity,colorSelect.value);return console.log("L'article créé est le suivant : ",itemToGet),itemToGet},getItemInfoOnCart=(cart,item)=>{let itemInfoOnCart={cartIndex:0,isIdOnCart:!1,isItemOnCart:!1},loopCount=0;for(;!1===itemInfoOnCart.isItemOnCart&&loopCount<cart.length;)cart[loopCount].id===item.id&&cart[loopCount].color===item.color?(itemInfoOnCart.cartIndex=loopCount,itemInfoOnCart.isItemOnCart=!0):cart[loopCount].id===item.id&&(itemInfoOnCart.isIdOnCart=!0,itemInfoOnCart.cartIndex=loopCount),loopCount++;return console.log("Info de l'article dans le panier",itemInfoOnCart),itemInfoOnCart};function buildCartFromStorage(){let cartToBuild=[];if(localStorage.length>0)for(let j=0;j<localStorage.length;j++){let key=localStorage.key(j),value=localStorage.getItem(key);"IsThisFirstTime_Log_From_LiveServer"!=key&&"objectToSend"!=key&&cartToBuild.push(JSON.parse(value))}return console.log("Panier construit à partir du localStorage",cartToBuild),cartToBuild}function addItemToCart(cart,item){const itemOnCart=getItemInfoOnCart(cart,item);if(itemOnCart.isItemOnCart)cart[itemOnCart.cartIndex].quantity+=item.quantity;else if(itemOnCart.isIdOnCart){const indexToTarget=itemOnCart.cartIndex;cart.splice(indexToTarget,0,item)}else cart.push(item);return console.log("Panier après modification ou ajout",cart),cart}function storeCart(cart){for(item of(localStorage.clear(),cart)){let itemKey=item.id+"_"+item.color;const itemStringified=JSON.stringify(item);localStorage.setItem(itemKey,itemStringified)}console.log("localStorage après intégration du nouvel article",localStorage)}